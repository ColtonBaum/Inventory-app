<!DOCTYPE html>
<html>
<head>
    <title>Inventory for Trailer #{{ trailer.id }}</title>
    <style>
        .item-detail { display: flex; gap: 15px; align-items: flex-start; margin-bottom: 12px; }
        .item-detail span { min-width: 220px; display: inline-block; }
        .item-detail input[type="number"],
        .item-detail input[type="text"] { padding: 4px; }
        .chk { display: flex; align-items: center; gap: 6px; }
        .note { display: none; }
    </style>
</head>
<body>
    <h2>Inventory Form for Trailer #{{ trailer.id }}</h2>

    <!-- Job Info -->
    <div>
        <p><strong>Job Name:</strong> {{ trailer.job_name }}</p>
        <p><strong>Job Number:</strong> {{ trailer.job_number }}</p>
        <p><strong>Location:</strong> {{ trailer.location }}</p>
        <p><strong>Foreman:</strong> {{ trailer.foreman_name }}</p>
    </div>

    <form method="POST">
        <!-- Tooling Items -->
        <h3>Tooling List</h3>
        {% for item in inventory_data %}
            <div class="item-detail">
                <span>{{ item.itemName }} (#{{ item.itemNumber }}) — Expected: {{ item.quantity }}</span>
                
                <div class="chk">
                    <input type="checkbox" name="{{ item.itemNumber }}_status_missing" value="Missing">
                    Missing
                </div>
                <input type="text" name="{{ item.itemNumber }}_note_missing" placeholder="Missing notes…">

                <div class="chk">
                    <input type="checkbox" name="{{ item.itemNumber }}_status_redtag" value="Red Tag">
                    Red Tag
                </div>
                <input type="text" name="{{ item.itemNumber }}_note_redtag" placeholder="Red tag notes…">

                <div class="chk">
                    <input type="checkbox" name="{{ item.itemNumber }}_status_complete" value="Complete" checked>
                    Complete
                </div>

                <label>Qty:
                    <input type="number" name="{{ item.itemNumber }}_quantity" min="0" value="{{ item.quantity }}">
                </label>

                <input type="hidden" name="{{ item.itemNumber }}_item_name" value="{{ item.itemName }}">
                <input type="hidden" name="{{ item.itemNumber }}_category" value="{{ item.category or 'General' }}">
            </div>
        {% endfor %}

        <!-- Extra Tooling Credit-Back -->
        {% if trailer.extra_tooling %}
            <h3>Extra Tooling</h3>
            {% for item in trailer.extra_tooling %}
                <div class="item-detail">
                    <span>{{ item.name }} (#{{ item.number }}) — Expected: {{ item.quantity }}</span>

                    <div class="chk">
                        <input type="checkbox" name="cb_{{ loop.index0 }}_missing" value="Missing">
                        Missing
                    </div>
                    <input type="text" name="cb_{{ loop.index0 }}_note_missing" placeholder="Missing notes…">

                    <div class="chk">
                        <input type="checkbox" name="cb_{{ loop.index0 }}_redtag" value="Red Tag">
                        Red Tag
                    </div>
                    <input type="text" name="cb_{{ loop.index0 }}_note_redtag" placeholder="Red tag notes…">

                    <div class="chk">
                        <input type="checkbox" name="cb_{{ loop.index0 }}_complete" value="Complete" checked>
                        Complete
                    </div>

                    <label>Qty Returned:
                        <input type="number" name="cb_{{ loop.index0 }}_quantity" min="0" value="{{ item.quantity }}">
                    </label>

                    <input type="hidden" name="cb_{{ loop.index0 }}_item_name" value="{{ item.name }}">
                    <input type="hidden" name="cb_{{ loop.index0 }}_item_number" value="{{ item.number }}">
                </div>
            {% endfor %}
        {% endif %}

        <br>
        <button type="submit">Submit Inventory</button>
    </form>
</body>
</html>
