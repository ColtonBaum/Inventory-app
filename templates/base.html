<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>{% block title %}Inventory{% endblock %}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{
      --bg:#ffffff;
      --panel:#ffffff;
      --muted:#6b7280;        /* gray-500 */
      --text:#111827;         /* gray-900 */
      --accent:#16a34a;       /* green-600 */
      --accent-2:#2563eb;     /* blue-600 */
      --danger:#dc2626;       /* red-600 */
      --warning:#d97706;      /* amber-600 */
      --border:#e5e7eb;       /* gray-200 */
      --hover:#f3f4f6;        /* gray-100 */
      --ring:#2563eb22;
      --shadow:0 6px 28px rgba(0,0,0,.07);
      --radius:12px;
      --radius-sm:8px;
      --font-size:16px;       /* base font */
      --table-font:15px;      /* table font */
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; background:var(--bg); color:var(--text);
      font:var(--font-size)/1.5 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
    }
    a{color:var(--accent-2); text-decoration:none}
    a:hover{text-decoration:underline}

    .container{max-width:1280px; margin:28px auto; padding:0 18px}

    /* tabs */
    .tabs{display:flex; gap:10px; margin-bottom:18px; border-bottom:1px solid var(--border)}
    .tab{
      padding:10px 16px; border:1px solid var(--border); border-bottom:none; color:var(--text);
      background:var(--panel); border-top-left-radius:10px; border-top-right-radius:10px;
    }
    .tab:hover{background:var(--hover)}
    .tab.active{font-weight:600; box-shadow:inset 0 -2px 0 #fff}

    /* cards */
    .card{background:var(--panel); border:1px solid var(--border); border-radius:var(--radius); box-shadow:var(--shadow)}
    .card-header{
      padding:14px 16px; border-bottom:1px solid var(--border);
      display:flex; align-items:center; justify-content:space-between; gap:12px;
    }
    .card-body{padding:16px}

    /* flash messages */
    .flash{border-left:4px solid var(--accent-2)}
    .flash.success{border-left-color: var(--accent)}
    .flash.info{border-left-color: var(--accent-2)}
    .flash.warning{border-left-color: var(--warning)}
    .flash.danger, .flash.error{border-left-color: var(--danger)}

    /* controls */
    .btn{
      appearance:none; border:1px solid var(--border); background:#111827; color:#fff;
      border-radius:10px; padding:10px 14px; cursor:pointer; text-decoration:none; display:inline-flex; align-items:center; gap:6px;
      white-space:nowrap;
    }
    .btn:hover{filter:brightness(1.03)}
    .btn.primary{background:var(--accent-2)}
    .btn.success{background:var(--accent)}
    .btn.warn{background:var(--warning)}
    .btn.danger{background:var(--danger)}
    .btn.ghost{background:#fff; color:var(--text)}
    .btn.small{padding:8px 12px; font-size:14px; border-radius:8px}

    .grid{display:grid; gap:14px}
    .grid.two{grid-template-columns: repeat(2, minmax(0,1fr))}
    .grid.three{grid-template-columns: repeat(3, minmax(0,1fr))}
    @media (max-width:900px){ .grid.two,.grid.three{grid-template-columns:1fr} }

    .field{display:flex; flex-direction:column; gap:6px}
    .field label{color:var(--muted); font-size:13px}
    input[type="text"], input[type="number"], textarea, select{
      background:#fff; color:var(--text); border:1px solid var(--border); border-radius:10px;
      padding:10px 12px; outline:none;
    }
    input:focus, textarea:focus, select:focus{box-shadow:0 0 0 3px var(--ring)}

    /* tables */
    table{width:100%; border-collapse:separate; border-spacing:0; font-size:var(--table-font)}
    thead th{
      text-align:left; background:#f8fafc; border-bottom:1px solid var(--border);
      padding:12px 14px; position:sticky; top:0; z-index:1;
    }
    tbody td{border-bottom:1px solid var(--border); padding:12px 14px; vertical-align:middle}
    tbody tr:hover{background:#fafafa}
    .w-actions{width:380px}                  /* wider Actions column */
    .actions-row{display:flex; flex-wrap:wrap; gap:8px}

    .muted{color:var(--muted)}
    .chip{background:#f8fafc; border:1px solid var(--border); padding:2px 8px; border-radius:999px; font-size:12px; color:#475569}

    /* accordion (inventory form) */
    .accordion{border-radius:var(--radius); overflow:hidden; border:1px solid var(--border); background:#fff}
    .acc-item + .acc-item{border-top:1px solid var(--border)}
    .acc-header{
      display:flex; align-items:center; justify-content:space-between; width:100%;
      background:#f8fafc; color:var(--text); padding:12px 16px; cursor:pointer; border:0;
    }
    .acc-header .title{display:flex; align-items:center; gap:10px}
    .acc-body{display:none; background:#fff; padding:10px 16px}
    .acc-item.open .acc-body{display:block}

    /* inventory rows */
    .item{border-bottom:1px dashed var(--border); padding:12px 0; display:grid; grid-template-columns: 1.6fr .9fr .9fr; gap:16px; align-items:flex-start}
    .item:last-child{border-bottom:none}
    .item .main{display:flex; flex-direction:column; gap:8px}
    .badges{display:flex; gap:8px; flex-wrap:wrap}
    .badge{display:inline-flex; align-items:center; gap:6px; border:1px solid var(--border); background:#f8fafc; padding:8px 10px; border-radius:10px}
    .qty-row{display:flex; align-items:center; gap:10px}
    .qty-row input[type="number"]{width:110px}
  </style>
  {% block head_extra %}{% endblock %}
</head>
<body>
  <div class="container">
    <div class="tabs">
      <a class="tab {% if request.endpoint == 'inventory.dashboard' %}active{% endif %}" href="{{ url_for('inventory.dashboard') }}">Dashboard</a>
      <a class="tab {% if request.endpoint == 'inventory.view_invoices' %}active{% endif %}" href="{{ url_for('inventory.view_invoices') }}">Invoices</a>
    </div>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="grid" style="margin-bottom:14px;">
          {% for cat, msg in messages %}
            <div class="card flash
                        {% if cat=='success' %} success
                        {% elif cat=='info' %} info
                        {% elif cat=='warning' %} warning
                        {% elif cat=='error' or cat=='danger' %} danger
                        {% endif %}">
              <div class="card-body">{{ msg }}</div>
            </div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    {% block content %}{% endblock %}
  </div>

  {% block scripts %}
  <script>
    // Simple accordion toggling (works for all .accordion blocks)
    document.addEventListener('click', function(e){
      const header = e.target.closest('.acc-header');
      if(!header) return;
      const item = header.closest('.acc-item');
      if(item) item.classList.toggle('open');
    });
  </script>
  {% endblock %}
</body>
</html>
